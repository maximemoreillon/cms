(function(t){function e(e){for(var n,r,c=e[0],s=e[1],l=e[2],d=0,_=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&_.push(a[r][0]),a[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(_.length)_.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,c=1;c<i.length;c++){var s=i[c];0!==a[s]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},a={app:0},o=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("85ec"),a=i.n(n);a.a},"07e5":function(t,e,i){"use strict";var n=i("7020"),a=i.n(n);a.a},"099d":function(t,e,i){},"09c8":function(t,e,i){},1002:function(t,e,i){"use strict";var n=i("cfe0"),a=i.n(n);a.a},"2e7e":function(t,e,i){"use strict";var n=i("09c8"),a=i.n(n);a.a},"32ff":function(t,e,i){},"3da7":function(t,e,i){"use strict";var n=i("9912"),a=i.n(n);a.a},"4c08":function(t,e,i){"use strict";var n=i("f849"),a=i.n(n);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("AppTemplate",{attrs:{navigation:t.$store.state.navigation_items,applicationName:"CMS"}})],1)},o=[],r=(i("28a9"),i("573d")),c={name:"App",components:{AppTemplate:r["a"]},mounted:function(){this.$store.commit("check_authentication"),this.$store.commit("update_categories")}},s=c,l=(i("034f"),i("2877")),u=Object(l["a"])(s,a,o,!1,null,null,null),d=u.exports,_=i("8c4f"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[t.article?i("Toolbar",[i("div",{staticClass:"dates_container"},[t.article.properties.creation_date?i("div",{},[t._v(" Created: "+t._s(t.format_date(t.article.properties.creation_date))+" ")]):t._e(),t.article.properties.edition_date?i("div",{},[t._v(" Edited: "+t._s(t.format_date(t.article.properties.edition_date))+" ")]):t._e()]),t.article.properties.published&&t.$store.state.logged_in?i("earth-icon"):t._e(),t.author?i("div",{},[t._v("Author: "+t._s(t.author.properties.username))]):t._e(),t.tags.length>0&&!t.tags_loading?i("div",{staticClass:"tags_wrapper"},t._l(t.tags,(function(t){return i("Tag",{key:t.identity.low,attrs:{tag:t}})})),1):t.tags_loading?i("Loader",{attrs:{size:"25"}}):t._e(),i("div",{staticClass:"growing_spacer"}),i("div",{staticClass:"tool_cluster"},[i("IconButton",{on:{click:function(e){return t.$router.push({name:"article_list"})}}},[i("arrow-left-icon")],1),t.$store.state.logged_in?i("IconButton",{on:{click:function(e){return t.download_as_html_file()}}},[i("download-icon")],1):t._e(),t.editable?i("IconButton",{on:{click:function(e){return t.$router.push({path:"article_editor",query:{id:t.article.identity.low}})}}},[i("pencil-icon")],1):t._e(),t.$store.state.logged_in?i("IconButton",{on:{buttonClicked:function(e){return t.$router.push({path:"article_editor"})}}},[i("plus-icon")],1):t._e()],1)],1):t._e(),t.article&&!t.article_loading?i("article",{ref:"article_content",domProps:{innerHTML:t._s(t.article.properties.content)}}):t.article_loading?i("Loader"):i("div",[t._v("Article not found")]),t.article&&!t.article_loading?i("div",{staticClass:"comment_area_wrapper"},[i("div",{staticClass:"new_comment_wrapper"},[i("div",{},[t._v(" Leave a comment ")]),i("div",{},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.properties.author,expression:"comment.properties.author"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:t.comment.properties.author},on:{input:function(e){e.target.composing||t.$set(t.comment.properties,"author",e.target.value)}}})]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.properties.content,expression:"comment.properties.content"}],attrs:{placeholder:"Comment"},domProps:{value:t.comment.properties.content},on:{input:function(e){e.target.composing||t.$set(t.comment.properties,"content",e.target.value)}}}),t._v(" "),i("div",{staticClass:"create_comment_button_wrapper"},[i("IconButton",{on:{buttonClicked:function(e){return t.create_comment()}}},[i("send-icon")],1)],1)]),i("div",{staticClass:"comments_wrapper"},[t.comments.length>0&&!t.comments_loading?t._l(t.comments,(function(e){return i("Comment",{key:e.identity.low,staticClass:"comment",attrs:{comment:e,deletable:t.editable},on:{deleted:function(e){return t.get_comments_of_article()}}})})):t.comments_loading?i("Loader"):i("div",[t._v("No comments yet")])],2)]):t._e(),i("Modal",{attrs:{open:t.modal.open},on:{close:function(e){t.modal.open=!1}}},[i("img",{staticClass:"modal_image",attrs:{src:t.modal.image_src,alt:""}})])],1)},p=[],h=(i("4160"),i("a434"),i("d3b7"),i("3ca3"),i("159b"),i("ddb0"),i("2b3d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"icon_button",class:{active:t.active},style:{fontSize:t.size},attrs:{type:"button"},on:{click:function(e){return t.button_clicked()}}},[t._t("default")],2)}),g=[],f={name:"IconButton",props:{size:{type:String,default:function(){return"100%"}},active:{type:Boolean,default:function(){return!1}}},methods:{button_clicked:function(){this.$emit("click"),this.$emit("buttonClicked")}}},v=f,b=(i("f869"),Object(l["a"])(v,h,g,!1,null,"644432b8",null)),y=b.exports,w=i("4e07"),k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"toolbar"},[t._t("default")],2)},I=[],x={name:"Toolbar"},C=x,$=(i("4c08"),Object(l["a"])(C,k,I,!1,null,"1c128d4e",null)),B=$.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loader"},[i("div",{staticClass:"spinner",style:{width:t.size+"px",height:t.size+"px",margin:.5*t.size+"px",borderWidth:.02*t.size+"px"}})])},E=[],T={name:"Loader",props:{size:{default:function(){return 75}}}},O=T,j=(i("1002"),Object(l["a"])(O,L,E,!1,null,"066ecf83",null)),P=j.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"tag",on:{click:function(e){return e.stopPropagation(),t.tag_clicked()}}},[t.tag?i("span",[t._v(t._s(t.tag.properties.name))]):i("span",[t._v("Invalid tag")]),t.removable?i("span",{staticClass:"remove_button",on:{click:function(e){return e.stopPropagation(),t.$emit("remove")}}},[t._v("×")]):t._e()])},q=[],S=(i("b0c0"),{name:"Tag",props:{tag:{type:Object},removable:{type:Boolean,default:function(){return!1}},cickable:{type:Boolean,default:function(){return!1}}},methods:{tag_clicked:function(){var t="article_list";this.$route.name===t&&this.$route.query.id===this.tag.identity.low||this.$router.push({name:t,query:{tag_id:this.tag.identity.low}})}}}),M=S,z=(i("e534"),Object(l["a"])(M,A,q,!1,null,"3cb3769a",null)),D=z.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment"},[i("div",{staticClass:"comment_header"},[i("div",{},[i("span",{staticClass:"author"},[t._v(" "+t._s(t.comment.properties.author)+" ")]),i("span",{staticClass:"date"},[t._v("("+t._s(t.format_date(t.comment.properties.date))+")")])]),t.deletable?i("IconButton",{on:{buttonClicked:function(e){return t.delete_comment()}}},[i("delete-icon")],1):t._e()],1),i("div",{staticClass:"content"},[t._v(" "+t._s(t.comment.properties.content)+" ")])])},H=[],F=i("0647"),U=(i("a15b"),{methods:{format_date:function(t){var e=t.month.low,i=t.day.low;return[t.year.low,(e>9?"":"0")+e,(i>9?"":"0")+i].join("/")}}}),R={name:"Comment",components:{IconButton:y,DeleteIcon:F["a"]},mixins:[U],props:{comment:{type:Object},deletable:{type:Boolean,default:function(){return!1}}},methods:{delete_comment:function(){var t=this;confirm("Delete comment?")&&this.axios.post("https://cms.maximemoreillon.com/delete_comment",{comment_id:this.comment.identity.low}).then((function(){t.$emit("deleted")})).catch((function(t){return alert(t.response.data)}))}}},W=R,J=(i("2e7e"),Object(l["a"])(W,N,H,!1,null,"7aec310b",null)),V=J.exports,Q=i("1487"),Y=i.n(Q),G=i("57e5"),K=i("17a2"),X=i("d902"),Z=i("bb79"),tt=i("758f"),et=i("c2d8"),it={components:{IconButton:y,Modal:w["a"],Toolbar:B,Loader:P,Tag:D,Comment:V,EarthIcon:K["a"],ArrowLeftIcon:G["a"],PencilIcon:X["a"],DownloadIcon:Z["a"],PlusIcon:tt["a"],SendIcon:et["a"]},mixins:[U],data:function(){return{sending:!1,article:null,article_loading:!1,tags:[],tags_loading:!1,comments:[],comments_loading:!1,comment:{properties:{author:"",content:""}},author:null,modal:{open:!1,image_src:""}}},mounted:function(){this.get_content()},methods:{get_content:function(){var t=this;"id"in this.$route.query&&(this.article_loading=!0,this.axios.post("https://cms.maximemoreillon.com/get_article",{article_id:this.$route.query.id}).then((function(e){t.article_loading=!1,t.article=e.data[0]._fields[e.data[0]._fieldLookup["article"]],setTimeout(t.add_event_listeners_for_image_modals,100),setTimeout((function(){document.querySelectorAll("pre code").forEach((function(t){Y.a.highlightBlock(t)}))}),10),t.get_tags_of_article(),t.get_comments_of_article(),t.get_author_of_article()})).catch((function(e){t.article_loading=!1,alert(e.response.data)})))},get_tags_of_article:function(){var t=this;this.tags_loading=!0,this.tags.splice(0,this.tags.length),this.axios.post("https://cms.maximemoreillon.com/get_tags_of_article",{article_id:this.article.identity.low}).then((function(e){t.tags_loading=!1,e.data.forEach((function(e){var i=e._fields[e._fieldLookup["tag"]];i&&t.tags.push(i)}))})).catch((function(e){t.tags_loading=!1,alert(e.response.data)}))},get_comments_of_article:function(){var t=this;this.comments_loading=!0,this.comments.splice(0,this.comments.length),this.axios.post("https://cms.maximemoreillon.com/get_comments_of_article",{article_id:this.article.identity.low}).then((function(e){t.comments_loading=!1,e.data.forEach((function(e){var i=e._fields[e._fieldLookup["comment"]];i&&t.comments.push(i)}))})).catch((function(e){t.comments_loading=!1,alert(e.response.data)}))},get_author_of_article:function(){var t=this;this.axios.post("https://cms.maximemoreillon.com/get_author_of_article",{article_id:this.article.identity.low}).then((function(e){t.author=e.data[0]._fields[e.data[0]._fieldLookup["author"]]})).catch((function(t){return alert(t.response.data)}))},create_comment:function(){var t=this;this.axios.post("https://cms.maximemoreillon.com/create_comment",{article_id:this.article.identity.low,comment:this.comment}).then((function(){t.comment.properties.author="",t.comment.properties.content="",t.get_comments_of_article()})).catch((function(t){return alert(t.response.data)}))},add_event_listeners_for_image_modals:function(){var t=this;this.$refs.article_content.querySelectorAll("img").forEach((function(e){e.addEventListener("click",(function(e){t.modal.open=!0,t.modal.image_src=e.target.src}),!1)}))},download_as_html_file:function(){var t=window.document.createElement("a");t.href=window.URL.createObjectURL(new Blob([this.article.content],{type:"text/html"})),t.download="test.html",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},computed:{editable:function(){var t=!1;return this.author&&(t=this.author.properties.username===this.$store.state.username),this.$store.state.logged_in&&this.$route.query.id&&t}}},nt=it,at=(i("07e5"),Object(l["a"])(nt,m,p,!1,null,"7b1a9252",null)),ot=at.exports,rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article_editor_view"},[t.$store.state.logged_in&&!t.article_loading?i("div",{staticClass:"authentication_wrapper"},[i("Toolbar",[i("div",{staticClass:"dates_container"},[t.article.properties.creation_date?i("div",{},[t._v("Created on "+t._s(t.format_date(t.article.properties.creation_date)))]):t._e(),t.article.properties.edition_date?i("div",{},[t._v("Last edited on "+t._s(t.format_date(t.article.properties.edition_date)))]):t._e()]),i("div",{staticClass:"tags_wrapper"},[i("tag-icon",{staticClass:"tag_icon"}),t._l(t.tags,(function(e,n){return i("Tag",{key:e.identity.low,attrs:{tag:e,removable:""},on:{remove:function(e){return t.delete_tag(n)}}})})),i("input",{ref:"tag_input",attrs:{id:"tag_search",type:"search",list:"existing_tag_list"},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add_tag()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.delete_last_Tag()}]}}),i("datalist",{attrs:{id:"existing_tag_list"}},t._l(t.existing_tags,(function(t){return i("option",{key:t.identity.low,domProps:{value:t.properties.name}})})),0)],2),i("div",{staticClass:"growing_spacer"}),i("div",{staticClass:"tool_cluster"},[t.$route.query.id?i("IconButton",{on:{click:function(e){return t.$router.push({name:"article",query:{id:t.$route.query.id}})}}},[i("arrow-left-icon")],1):i("IconButton",{on:{click:function(e){return t.$router.push({name:"article_list"})}}},[i("arrow-left-icon")],1),t._e(),i("IconButton",{on:{click:function(e){return t.submit_article()}}},[i("content-save-icon")],1),t.article.identity.low?i("IconButton",{on:{click:function(e){return t.delete_article()}}},[i("delete-icon")],1):t._e(),i("IconButton",{attrs:{active:t.article.properties.published},on:{click:function(e){return t.toggle_published()}}},[i("earth-icon")],1)],1)]),i("div",{staticClass:"editor_wrapper"},[i("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.commands,a=e.isActive;e.getMarkAttrs;return[i("div",{staticClass:"menubar"},[i("IconButton",{attrs:{active:a.bold()},on:{click:n.bold}},[i("format-bold-icon")],1),i("IconButton",{attrs:{active:a.italic()},on:{click:n.italic}},[i("format-italic-icon")],1),i("IconButton",{attrs:{active:a.strike()},on:{click:n.strike}},[i("format-strikethrough-icon")],1),i("IconButton",{attrs:{active:a.underline()},on:{click:n.underline}},[i("format-underline-icon")],1),i("IconButton",{attrs:{active:a.code()},on:{click:n.code}},[i("code-tags-icon")],1),i("IconButton",{attrs:{active:a.paragraph()},on:{click:n.paragraph}},[i("format-paragraph-icon")],1),i("IconButton",{attrs:{active:a.heading({level:1})},on:{click:function(t){return n.heading({level:1})}}},[i("format-header-1-icon")],1),i("IconButton",{attrs:{active:a.heading({level:2})},on:{click:function(t){return n.heading({level:2})}}},[i("format-header-2-icon")],1),i("IconButton",{attrs:{active:a.heading({level:3})},on:{click:function(t){return n.heading({level:3})}}},[i("format-header-3-icon")],1),i("IconButton",{attrs:{active:a.bullet_list()},on:{click:n.bullet_list}},[i("format-list-bulleted-icon")],1),i("IconButton",{attrs:{active:a.ordered_list()},on:{click:n.ordered_list}},[i("format-list-numbered-icon")],1),i("IconButton",{attrs:{active:a.blockquote()},on:{click:n.blockquote}},[i("format-quote-close-icon")],1),i("IconButton",{attrs:{active:a.code_block()},on:{click:n.code_block}},[i("code-tags-icon")],1),i("IconButton",{on:{click:n.undo}},[i("undo-icon")],1),i("IconButton",{on:{click:n.redo}},[i("redo-icon")],1),i("IconButton",{on:{click:function(e){return t.showImagePrompt(n.image)}}},[i("image-icon")],1),i("IconButton",{on:{click:function(e){return t.showVideoPromt(n.iframe)}}},[i("youtube-icon")],1),i("IconButton",{staticClass:"menubar_button",class:{"is-active":a.link()},on:{click:function(e){return t.prompt_for_url(n.link)}}},[i("link-icon")],1)],1)]}}],null,!1,3390960747)}),i("article",{staticClass:"editor"},[i("editor-content",{staticClass:"editor_content",attrs:{editor:t.editor}})],1)],1)],1):t._e(),t.$store.state.logged_in&&t.article_loading?i("Loader"):t._e(),t.$store.state.logged_in?t._e():i("div",{},[t._v(" Articles cannot be edited by unauthenticated user ")])],1)},ct=[],st=(i("d81d"),i("cd42")),lt=i("f23d"),ut=i("d4ec"),dt=i("bee2"),_t=i("99de"),mt=i("7e84"),pt=i("262e"),ht=function(t){function e(){return Object(ut["a"])(this,e),Object(_t["a"])(this,Object(mt["a"])(e).apply(this,arguments))}return Object(pt["a"])(e,t),Object(dt["a"])(e,[{key:"commands",value:function(t){var e=t.type;return function(t){return function(i,n){var a=i.selection,o=a.$cursor?a.$cursor.pos:a.$to.pos,r=e.create(t),c=i.tr.insert(o,r);n(c)}}}},{key:"name",get:function(){return"iframe"}},{key:"schema",get:function(){return{attrs:{src:{default:null}},group:"block",selectable:!1,parseDOM:[{tag:"iframe",getAttrs:function(t){return{src:t.getAttribute("src")}}}],toDOM:function(t){return["iframe",{src:"https://www.youtube.com/embed/".concat(t.attrs.src),frameborder:0,allowfullscreen:"true",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}]}}}}]),e}(st["f"]),gt=i("4dd1"),ft=i.n(gt),vt=i("ee8c"),bt=i.n(vt),yt=i("f0f8"),wt=i.n(yt),kt=i("9510"),It=i.n(kt),xt=i("b65b"),Ct=i.n(xt),$t=i("44b5"),Bt=i.n($t),Lt=i("0209"),Et=i.n(Lt),Tt=i("8dcb"),Ot=i.n(Tt),jt=i("0fc3"),Pt=i("fa90"),At=i("c55d"),qt=i("2672"),St=i("b53f"),Mt=i("0119"),zt=i("b00a"),Dt=i("aca8"),Nt=i("c756"),Ht=i("3610"),Ft=i("0148"),Ut=i("ddd9"),Rt=i("3048"),Wt=i("1a4c"),Jt=i("16f7"),Vt=i("7143"),Qt=i("ad93"),Yt=i("8032"),Gt=i("41a9"),Kt={components:{Toolbar:B,Loader:P,Tag:D,IconButton:y,EditorContent:st["b"],EditorMenuBar:st["c"],ArrowLeftIcon:G["a"],DeleteIcon:F["a"],ContentSaveIcon:jt["a"],EarthIcon:K["a"],CodeTagsIcon:Pt["a"],FormatHeader1Icon:At["a"],FormatHeader2Icon:qt["a"],FormatHeader3Icon:St["a"],FormatBoldIcon:zt["a"],FormatItalicIcon:Dt["a"],FormatStrikethroughIcon:Nt["a"],FormatUnderlineIcon:Ht["a"],FormatParagraphIcon:Mt["a"],FormatListBulletedIcon:Ft["a"],FormatListNumberedIcon:Ut["a"],FormatQuoteCloseIcon:Rt["a"],UndoIcon:Wt["a"],RedoIcon:Jt["a"],LinkIcon:Vt["a"],PencilIcon:X["a"],ImageIcon:Qt["a"],TagIcon:Yt["a"],YoutubeIcon:Gt["a"]},mixins:[U],data:function(){var t=this;return{editor:new st["a"]({extensions:[new lt["a"],new lt["c"],new lt["e"],new lt["g"],new lt["h"]({levels:[1,2,3]}),new lt["j"],new lt["n"],new lt["o"],new lt["r"],new lt["s"],new lt["m"],new lt["b"],new lt["d"],new lt["l"],new lt["q"],new lt["t"],new lt["i"],new lt["k"],new lt["p"]({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",emptyNodeText:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0}),new lt["f"]({languages:{javascript:ft.a,css:bt.a,shell:Ct.a,python:It.a,bash:wt.a,dockerfile:Bt.a,cpp:Et.a,xml:Ot.a}}),new ht],editable:!0,content:"",onUpdate:function(e){var i=e.getHTML;t.article.properties.content=i(),t.set_article_title(),t.set_article_summary(),t.set_article_thumbnail_src()}}),article:{identity:{low:void 0},properties:{content:null,published:!1,title:"",summary:"",thumbnail_src:""}},tags:[],tags_loading:!1,editable:!0,article_loading:!0,existing_tags:[]}},watch:{editable:function(){this.editor.setOptions({editable:this.editable})}},mounted:function(){this.get_article_if_exists(),this.get_existing_tags()},beforeDestroy:function(){this.editor.destroy()},methods:{get_article_if_exists:function(){var t=this;"id"in this.$route.query?(this.article_loading=!0,this.axios.post("https://cms.maximemoreillon.com/get_article",{article_id:this.$route.query.id}).then((function(e){t.article=e.data[0]._fields[e.data[0]._fieldLookup["article"]],t.editor.setContent(t.article.properties.content),t.article_loading=!1,t.get_tags_of_article()})).catch((function(t){return alert(t.response.data)}))):this.article_loading=!1},get_tags_of_article:function(){var t=this;this.tags_loading=!0,this.axios.post("https://cms.maximemoreillon.com/get_tags_of_article",{article_id:this.article.identity.low}).then((function(e){t.tags_loading=!1,e.data.forEach((function(e){var i=e._fields[e._fieldLookup["tag"]];i&&t.tags.push(i)}))})).catch((function(t){return alert(t.response.data)}))},toggle_published:function(){this.article.properties.published=!this.article.properties.published},submit_article:function(){var t=this;this.article_loading=!0,this.article.identity.low?this.axios.post("https://cms.maximemoreillon.com/update_article",{article:this.article,tag_ids:this.tags.map((function(t){return t.identity.low}))}).then((function(e){t.article_loading=!1;var i=e.data[0]._fields[e.data[0]._fieldLookup["article"]].identity.low;t.$router.push({name:"article",query:{id:i}})})).catch((function(e){t.article_loading=!1,alert(e.response.data)})):this.axios.post("https://cms.maximemoreillon.com/create_article",{article:this.article,tag_ids:this.tags.map((function(t){return t.identity.low}))}).then((function(e){t.article_loading=!1;var i=e.data[0]._fields[e.data[0]._fieldLookup["article"]].identity.low;t.$router.push({name:"article",query:{id:i}})})).catch((function(e){t.article_loading=!1,alert(e.response.data)}))},delete_article:function(){var t=this;confirm("Delete article?")&&(this.article_loading=!0,this.axios.post("https://cms.maximemoreillon.com/delete_article",{article_id:this.article.identity.low}).then((function(){t.article_loading=!1,t.$router.push({name:"article_list"})})).catch((function(t){alert(t.response.data)})))},add_tag:function(){var t=this;this.$refs.tag_input.value.length>0&&this.axios.post("https://cms.maximemoreillon.com/create_tag",{tag_name:this.$refs.tag_input.value}).then((function(e){var i=e.data[0]._fields[e.data[0]._fieldLookup["tag"]];t.tags.push(i)})).catch((function(t){alert(t.response.data)})),this.$refs.tag_input.value=""},delete_tag:function(t){this.tags.splice(t,1)},delete_last_Tag:function(){},get_existing_tags:function(){var t=this;this.axios.post("https://cms.maximemoreillon.com/get_tag_list",{}).then((function(e){t.existing_tags.splice(0,t.existing_tags.length),e.data.forEach((function(e){var i=e._fields[e._fieldLookup["tag"]];t.existing_tags.push(i)}))})).catch((function(t){return alert(t)}))},set_article_title:function(){var t=document.createElement("div");t.innerHTML=this.article.properties.content;var e=t.getElementsByTagName("h1")[0];this.article.properties.title=e?e.innerHTML:null},set_article_summary:function(){var t=document.createElement("div");t.innerHTML=this.article.properties.content;var e=t.getElementsByTagName("p")[0];this.article.properties.summary=e?e.innerHTML:null},set_article_thumbnail_src:function(){var t=document.createElement("div");t.innerHTML=this.article.properties.content;var e=t.getElementsByTagName("img")[0];this.article.properties.thumbnail_src=e?e.src:null},prompt_for_url:function(t){var e=prompt("URL:");e&&t({href:e})},showVideoPromt:function(t){var e=prompt("Enter the ID of your video here");e&&t({src:e})},showImagePrompt:function(t){var e=prompt("Enter the url of your image here");e&&t({src:e})},parse_file:function(t){var e=this,i=t.srcElement.files[0],n=new FileReader;n.onload=function(t){return e.article.content=t.target.result},n.onerror=function(t){return alert(t)},n.readAsText(i)}}},Xt=Kt,Zt=(i("b545"),Object(l["a"])(Xt,rt,ct,!1,null,null,null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"view",staticClass:"article_list_view"},[t.tag&&!t.tag_loading?i("Toolbar",[i("Tag",{attrs:{tag:t.tag}}),i("IconButton",{on:{click:function(e){return t.$router.push({name:"article_list"})}}},[i("close-icon")],1),t.$store.state.logged_in?i("IconButton",{on:{click:function(e){return t.prompt_for_rename()}}},[i("pencil-icon")],1):t._e(),t.$store.state.logged_in?i("IconButton",{on:{click:function(e){return t.delete_tag()}}},[i("delete-icon")],1):t._e(),t.$store.state.logged_in?i("IconButton",{attrs:{active:t.tag.properties.navigation_item},on:{click:function(e){return t.toggle_navigation_item()}}},[i("pin-icon")],1):t._e()],1):t.tag_loading?i("Loader",{attrs:{size:"25"}}):t._e(),i("Toolbar",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.search_string,expression:"search_string"}],attrs:{type:"search"},domProps:{value:t.search_string},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||(t.search_string=e.target.value)}}}),i("IconButton",{on:{click:function(e){return t.search()}}},[i("magnify-icon")],1),i("div",{staticClass:"tool_cluster"},[i("IconButton",{attrs:{active:"article.edition_date"===t.sort},on:{click:function(e){return t.sort_by_date()}}},[i("calendar-icon")],1),i("IconButton",{attrs:{active:"article.title"===t.sort},on:{click:function(e){return t.sort_by_title()}}},[i("alphabetical-icon")],1),i("IconButton",{attrs:{active:"DESC"===t.order},on:{click:function(e){return t.sort_order_descending()}}},[i("sort-descending-icon")],1),i("IconButton",{attrs:{active:"ASC"===t.order},on:{click:function(e){return t.sort_order_ascending()}}},[i("sort-ascending-icon")],1)],1),i("span",{staticClass:"article_counter"},[i("file-document-outline-icon"),t._v("x"+t._s(t.article_count)+" ")],1),i("div",{staticClass:"growing_spacer"}),t.$store.state.logged_in?i("IconButton",{on:{buttonClicked:function(e){return t.$router.push({path:"article_editor"})}}},[i("plus-icon")],1):t._e()],1),t.articles.length>0?i("div",{staticClass:"articles_container"},t._l(t.articles,(function(t,e){return i("ArticlePreview",{key:e,attrs:{article:t}})})),1):t._e(),t.articles_loading?i("Loader"):t._e(),0!==t.articles.length||t.articles_loading?t._e():i("div",{},[t._v("No articles")]),t.articles_loading||t.articles_all_loaded?t._e():i("button",{staticClass:"load_more_button",attrs:{type:"button"},on:{click:function(e){return t.get_articles()}}},[i("span",[t._v("Load more")])])],1)},ie=[],ne=(i("ac1f"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article_preview",on:{click:function(e){return t.$router.push({path:"article",query:{id:t.article.identity.low}})}}},[t.article.properties.published&&t.$store.state.logged_in?i("earth-icon",{staticClass:"publishing_status"}):t._e(),i("div",{staticClass:"article_title"},[t._v(t._s(t.article.properties.title))]),t.article.properties.creation_date?i("div",{staticClass:"article_metadata"},[i("span",{staticClass:"article_date"},[t._v(" "+t._s(t.format_date(t.article.properties.creation_date))+" ")])]):t._e(),t.article.properties.thumbnail_src?i("img",{staticClass:"article_thumbnail",attrs:{src:t.article.properties.thumbnail_src,alt:""}}):t._e(),t.article.properties.summary?i("div",{staticClass:"article_summary",domProps:{innerHTML:t._s(t.article.properties.summary)}}):t._e(),t.tags&&!t.tags_loading?i("div",{staticClass:"tags_container"},t._l(t.tags,(function(t){return i("Tag",{key:t.identity.low,attrs:{tag:t}})})),1):t.tags_loading?i("Loader",{attrs:{size:"25"}}):i("div",{},[t._v("No tags")])],1)}),ae=[],oe={name:"ArticlePreview",props:{article:Object},data:function(){return{tags:[],tags_loading:!1}},mixins:[U],components:{Tag:D,Loader:P,EarthIcon:K["a"]},mounted:function(){this.get_tags()},methods:{get_tags:function(){var t=this;this.tags_loading=!0,this.axios.post("https://cms.maximemoreillon.com/get_tags_of_article",{article_id:this.article.identity.low}).then((function(e){t.tags.splice(0,t.tags.length),e.data.forEach((function(e){var i=e._fields[e._fieldLookup["tag"]];t.tags.push(i)})),t.tags_loading=!1})).catch((function(t){return alert(t.response.data)}))}}},re=oe,ce=(i("3da7"),Object(l["a"])(re,ne,ae,!1,null,"119ceb3e",null)),se=ce.exports,le=i("077e"),ue=i("002d"),de=i("a8eb"),_e=i("11ad"),me=i("d410"),pe=i("0e09"),he=i("bbc4"),ge=i("7eb5"),fe={components:{IconButton:y,ArticlePreview:se,Toolbar:B,Loader:P,Tag:D,PencilIcon:X["a"],PinIcon:me["a"],FileDocumentOutlineIcon:pe["a"],PlusIcon:tt["a"],DeleteIcon:F["a"],CalendarIcon:le["a"],AlphabeticalIcon:ue["a"],SortDescendingIcon:de["a"],SortAscendingIcon:_e["a"],MagnifyIcon:he["a"],CloseIcon:ge["a"]},data:function(){return{articles:[],article_count:0,articles_loading:!1,articles_all_loaded:!1,tag:null,tag_loading:!1,sort:"article.edition_date",order:"DESC",search_string:"",batch_size:10}},methods:{delete_all_articles:function(){this.articles.splice(0,this.articles.length),this.articles_all_loaded=!1},get_articles:function(){var t=this;this.articles_loading=!0,this.article_count=0;var e={};e.sort=this.sort,e.order=this.order,e.start_index=this.articles.length,e.search=this.search_string,e.batch_size=this.batch_size,this.tag&&(e.tag_id=this.tag.identity.low),this.axios.post("https://cms.maximemoreillon.com/get_articles",e).then((function(e){e.data.forEach((function(e){var i=e._fields[e._fieldLookup["article"]];t.articles.push(i)})),e.data.length<t.batch_size&&(t.articles_all_loaded=!0),t.articles_loading=!1})).catch((function(e){t.articles_loading=!1,e.response?alert(e.response.data):alert(e)})),this.axios.post("https://cms.maximemoreillon.com/get_article_count",e).then((function(e){t.article_count=e.data[0]._fields[0].low})).catch((function(t){t.response?alert(t.response.data):alert(t)}))},get_tag:function(t){var e=this;this.tag=null,t?(this.tag_loading=!0,this.articles.splice(0,this.articles.length),this.axios.post("https://cms.maximemoreillon.com/get_tag",{tag_id:t}).then((function(t){if(e.tag_loading=!1,t.data.length>0){var i=t.data[0];e.tag=i._fields[i._fieldLookup["tag"]]}e.delete_all_articles(),e.get_articles()})).catch((function(t){e.articles_loading=!1,t.response?alert(t.response.data):alert(t)}))):(this.delete_all_articles(),this.get_articles())},sort_by_date:function(){this.sort="article.edition_date",this.delete_all_articles(),this.get_articles()},sort_by_title:function(){this.sort="article.title",this.delete_all_articles(),this.get_articles()},sort_order_ascending:function(){this.order="ASC",this.delete_all_articles(),this.get_articles()},sort_order_descending:function(){this.order="DESC",this.delete_all_articles(),this.get_articles()},update_tag:function(){var t=this;this.tag_loading=!0,this.axios.post("https://cms.maximemoreillon.com/update_tag",{tag:this.tag}).then((function(e){if(e.data.length>0){var i=e.data[0];t.tag=i._fields[i._fieldLookup["tag"]]}t.$store.commit("update_categories"),t.delete_all_articles(),t.get_articles(),t.tag_loading=!1})).catch((function(t){return alert(t)}))},prompt_for_rename:function(){var t=prompt("New tag name",this.tag.properties.name);t&&(this.tag.properties.name=t,this.update_tag())},toggle_navigation_item:function(){this.tag.properties.navigation_item=!this.tag.properties.navigation_item,this.update_tag()},delete_tag:function(){var t=this;confirm("Delete tag?")&&(this.article_loading=!0,this.axios.post("https://cms.maximemoreillon.com/delete_tag",{tag_id:this.tag.identity.low}).then((function(){t.$router.push({name:"article_list"})})).catch((function(t){return alert(t)})))},load_more_when_scroll_to_bottom:function(){var t=this;this.$refs.view.parentNode.onscroll=function(){if("article_list"===t.$route.name){var e=t.$refs.view,i=e.parentNode,n=i.getElementsByTagName("footer")[0],a=e.offsetHeight+n.offsetHeight,o=i.scrollTop+i.offsetHeight,r=Math.abs(a-o);r<5&&!t.articles_loading&&t.articles.length>0&&!t.articles_all_loaded&&t.get_articles()}}},search:function(){this.delete_all_articles(),this.get_articles()}},mounted:function(){this.get_tag(this.$route.query.tag_id),this.load_more_when_scroll_to_bottom()},beforeRouteUpdate:function(t,e,i){this.get_tag(t.query.tag_id),i()}},ve=fe,be=(i("dde0"),Object(l["a"])(ve,ee,ie,!1,null,"27cc1981",null)),ye=be.exports;n["a"].use(_["a"]);var we=[{path:"/",name:"article_list",component:ye},{path:"/article",name:"article",component:ot,props:!0},{path:"/article_editor",name:"article_editor",component:te,props:!0}],ke=new _["a"]({mode:"history",base:"/",routes:we}),Ie=ke,xe=i("2f62"),Ce=i("bc3a"),$e=i.n(Ce);n["a"].use(xe["a"]);var Be=new xe["a"].Store({state:{logged_in:!1,username:null,navigation_items:[{route:"/",icon:"",label:"All articles"}]},mutations:{check_authentication:function(t){n["a"].$cookies.get("jwt")?(t.logged_in=!0,$e.a.post("https://authentication.maximemoreillon.com/whoami",{},{headers:{Authorization:"Bearer "+n["a"].$cookies.get("jwt")}}).then((function(e){t.username=e.data.username})).catch((function(t){console.log(t.response.data)}))):t.logged_in=!1},update_categories:function(t){$e.a.post("https://cms.maximemoreillon.com/get_navigation_items").then((function(e){t.navigation_items.splice(1,t.navigation_items.length),e.data.forEach((function(e){var i=e._fields[e._fieldLookup["tag"]],n={route:"/?tag_id="+i.identity.low,icon:"",label:i.properties.name};t.navigation_items.push(n)}))})).catch((function(t){return console.log(t)}))}},actions:{},modules:{}}),Le=i("a7fe"),Ee=i.n(Le),Te=i("2b27"),Oe=i.n(Te);n["a"].use(Ee.a,$e.a),n["a"].use(Oe.a),n["a"].config.productionTip=!1,Ie.beforeEach((function(t,e,i){Be.commit("check_authentication"),n["a"].$cookies.get("jwt")?$e.a.defaults.headers.common["Authorization"]="Bearer ".concat(n["a"].$cookies.get("jwt")):delete $e.a.defaults.headers.common["Authorization"],Be.commit("update_categories"),i()})),new n["a"]({router:Ie,store:Be,render:function(t){return t(d)}}).$mount("#app")},7020:function(t,e,i){},"85ec":function(t,e,i){},9912:function(t,e,i){},"9a5b":function(t,e,i){},b545:function(t,e,i){"use strict";var n=i("32ff"),a=i.n(n);a.a},cfe0:function(t,e,i){},dde0:function(t,e,i){"use strict";var n=i("e7c6"),a=i.n(n);a.a},e534:function(t,e,i){"use strict";var n=i("9a5b"),a=i.n(n);a.a},e7c6:function(t,e,i){},f849:function(t,e,i){},f869:function(t,e,i){"use strict";var n=i("099d"),a=i.n(n);a.a}});
//# sourceMappingURL=app.344edaa4.js.map